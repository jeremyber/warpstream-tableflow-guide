{
  "generators" : [ {
    "topic" : "customers",
    "key": {
      "_gen": "uuid"
    },
    "value" : {
      "customerId" : {
        "_gen" : "uuid"
      },
      "name" : {
        "_gen" : "string",
        "expr" : "#{Name.fullName}"
      },
      "zone" : {
        "_gen" : "weightedOneOf",
        "choices" : [ {
          "weight" : 20,
          "value" : "zone 1"
        }, {
          "weight" : 40,
          "value" : "zone 2"
        }, {
          "weight" : 10,
          "value" : "zone 3"
        } ]
      },
      "address" : {
        "_gen" : "string",
        "expr" : "#{Address.fullAddress}"
      },
      "membership" : {
        "_gen" : "oneOf",
        "choices" : [ "bronze", "silver", "gold" ]
      }
    }
  }, {
    "topic" : "orders",
    "key": {
      "_gen": "uuid"
    },
    "value" : {
      "orderId" : {
        "_gen" : "uuid"
      },
      "customerId" : {
        "_gen" : "lookup",
        "topic" : "customers",
        "path" : [ "value", "customerId" ]
      },
      "orderDate" : {
        "_gen" : "formatDateTime",
        "ms" : {
          "_gen" : "now"
        },
        "format" : "yyyy-MM-dd"
      },
      "cost" : {
        "_gen" : "normalDistribution",
        "mean" : 50,
        "sd" : 20,
        "decimals" : 2
      },
      "creditCardNumber" : {
        "_gen" : "string",
        "expr" : "#{Finance.creditCard}"
      }
    }
  } ],
    "globalConfigs": {
      "throughput": 100
    },
    "connections" : {
    "warpstream" : {
      "kind" : "kafka",
        "topicPolicy": {
            "policy": "create",
            "partitions": 30,
            "replicationFactor": 2
        },
      "producerConfigs" : {
        "bootstrap.servers" : "localhost:9092",
        "value.serializer": "io.shadowtraffic.kafka.serdes.JsonSerializer",
        "key.serializer": "io.shadowtraffic.kafka.serdes.JsonSerializer",
        "sasl.mechanism": "PLAIN",
        "security.protocol": "PLAINTEXT"
      }
    }
  }
}